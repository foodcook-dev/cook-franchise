import{r as a,j as t,c as L,B as _,L as $}from"./index-6bT5UNUC.js";import{C as M}from"./card-B6CtzMdL.js";import{u as G,F as H,a as U,b as X,d as O,e as z,t as W}from"./form-ClgrUHWN.js";import{I as Z}from"./input-CaMMBWZT.js";import{S as q}from"./separator-DGiID5GI.js";import{o as J,s as Q}from"./types-DehJQPaS.js";const T=a.createContext(!1),A=a.forwardRef(({className:u,children:i,...N},x)=>{const{defaultValue:c,value:f,onChange:l,onComplete:m,onIncomplete:d,placeholder:v="â—‹",type:p="alphanumeric",name:C,form:R,otp:j=!1,mask:V=!1,disabled:D=!1,readOnly:w=!1,autoFocus:F=!1,ariaLabel:I="",...S}=N,k=te(i),g=ne(i),{pins:n,pinValue:e,refMap:r,...s}=ee({value:f,defaultValue:c,placeholder:v,type:p,length:g,readOnly:w});a.useEffect(()=>{l&&l(e)},[l,e]);const o=a.useRef(e.length===g);a.useEffect(()=>{e.length===g&&o.current===!1&&(o.current=!0,m&&m(e)),e.length!==g&&o.current===!0&&(o.current=!1,d&&d(e))},[g,m,d,e,n,f]),a.useEffect(()=>{if(!F)return;const E=r==null?void 0:r.get(0);E&&E.focus()},[F,r]);const b=a.useRef(0);let P=0;const K=k.map(E=>{if(E.type===B){const y=P;return P=P+1,a.cloneElement(E,{name:C,inputKey:`input-${y}`,value:g>y?n[y]:"",onChange:h=>s.handleChange(h,y),onFocus:h=>s.handleFocus(h,y),onBlur:()=>s.handleBlur(y),onKeyDown:h=>s.handleKeyDown(h,y),onPaste:h=>s.handlePaste(h),placeholder:v,type:p,mask:V,autoComplete:j?"one-time-code":"off",disabled:D,readOnly:w,"aria-label":I||`Pin input ${P} of ${g}`,ref:h=>{h?r==null||r.set(y,h):r==null||r.delete(y)}})}return b.current=b.current+1,E});return t.jsx(T.Provider,{value:!0,children:t.jsxs("div",{ref:x,"aria-label":"Pin Input",className:u,...S,children:[K,t.jsx("input",{type:"hidden",name:C,form:R,value:e})]})})});A.displayName="PinInput";const Y=({className:u,component:i,...N},x)=>{const{mask:c,type:f,inputKey:l,...m}=N;if(!a.useContext(T))throw new Error(`PinInputField must be used within ${A.displayName}.`);const v=i||"input";return t.jsx(v,{ref:x,type:c?"password":f==="numeric"?"tel":"text",inputMode:f==="numeric"?"numeric":"text",className:L("size-10 text-center",u),...m},l)},B=a.forwardRef(Y),ee=({value:u,defaultValue:i,placeholder:N,type:x,length:c,readOnly:f})=>{const l=a.useMemo(()=>Array.from({length:c},(n,e)=>i?i.charAt(e):u?u.charAt(e):""),[i,c,u]),[m,d]=a.useState(l),v=m.join("").trim();a.useEffect(()=>{d(l)},[l]);const p=a.useRef(null);function C(){return p.current||(p.current=new Map),p.current}function R(n){const e=C();return e==null?void 0:e.get(n)}function j(n){const e=R(n);e&&(e.focus(),e.placeholder="")}function V(n,e){n.target.select(),j(e)}function D(n){const e=R(n);e&&(e.placeholder=N)}function w(n,e){const r=R(e);r&&(r.value=n),d(s=>s.map((o,b)=>b===e?n:o))}function F(n){return(x==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(n)}const I=a.useRef(null);function S(n,e){const r=n.target.value,s=I.current,o=s&&s.length===c?s.charAt(c-1):r.slice(-1);F(o)&&(w(o,e),I.current=null,r.length>0&&j(e+1))}function k(n){n.preventDefault();const e=n.clipboardData.getData("text/plain").replace(/[\n\r\s]+/g,""),r=e.split("").slice(0,c);if(r.every(o=>F(o))){for(let o=0;o<c;o++)o<r.length&&w(r[o],o);I.current=e,j(r.length<c?r.length:c-1)}}function g(n,e){const{ctrlKey:r,key:s,shiftKey:o,metaKey:b}=n;x==="numeric"&&(!(s==="Backspace"||s==="Tab"||s==="Control"||s==="Delete"||r&&s==="v"||b&&s==="v"||!Number.isNaN(Number(s)))||f)&&n.preventDefault(),s==="ArrowLeft"||o&&s==="Tab"?(n.preventDefault(),j(e-1)):s==="ArrowRight"||s==="Tab"||s===" "?(n.preventDefault(),j(e+1)):s==="Delete"?n.preventDefault():s==="Backspace"&&(n.preventDefault(),w("",e),n.target.value===""&&j(e-1))}return{pins:m,pinValue:v,refMap:C(),handleFocus:V,handleBlur:D,handleChange:S,handlePaste:k,handleKeyDown:g}},te=u=>a.Children.toArray(u).filter(i=>{if(a.isValidElement(i))return a.isValidElement(i);throw new Error(`${A.displayName} contains invalid children.`)}),ne=u=>a.Children.toArray(u).filter(i=>{if(a.isValidElement(i)&&i.type===B)return a.isValidElement(i)}).length,se=J({otp:Q().min(1,{message:"Please enter your otp code."})});function re({className:u,...i}){const[N,x]=a.useState(!1),[c,f]=a.useState(!0),l=G({resolver:W(se),defaultValues:{otp:""}});function m(d){x(!0),console.log({data:d}),setTimeout(()=>{l.reset(),x(!1)},2e3)}return t.jsx("div",{className:L("grid gap-6",u),...i,children:t.jsx(H,{...l,children:t.jsx("form",{onSubmit:l.handleSubmit(m),children:t.jsxs("div",{className:"grid gap-2",children:[t.jsx(U,{control:l.control,name:"otp",render:({field:d})=>t.jsxs(X,{className:"space-y-1",children:[t.jsx(O,{children:t.jsx(A,{...d,className:"flex h-10 justify-between",onComplete:()=>f(!1),onIncomplete:()=>f(!0),children:Array.from({length:7},(v,p)=>p===3?t.jsx(q,{orientation:"vertical"},p):t.jsx(B,{component:Z,className:`${l.getFieldState("otp").invalid?"border-red-500":""}`},p))})}),t.jsx(z,{})]})}),t.jsx(_,{className:"mt-2",disabled:c,loading:N,children:"Verify"})]})})})})}function de(){return t.jsx(t.Fragment,{children:t.jsx("div",{className:"container grid h-svh flex-col items-center justify-center bg-primary-foreground lg:max-w-none lg:px-0",children:t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 sm:w-[480px] lg:p-8",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-6 w-6",children:t.jsx("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"})}),t.jsx("h1",{className:"text-xl font-medium",children:"Shadcn Admin"})]}),t.jsxs(M,{className:"p-6",children:[t.jsxs("div",{className:"mb-2 flex flex-col space-y-2 text-left",children:[t.jsx("h1",{className:"text-md font-semibold tracking-tight",children:"Two-factor Authentication"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Please enter the authentication code. ",t.jsx("br",{})," We have sent the authentication code to your email."]})]}),t.jsx(re,{}),t.jsxs("p",{className:"mt-4 px-8 text-center text-sm text-muted-foreground",children:["Haven't received it?"," ",t.jsx($,{to:"/resent-new-code",className:"underline underline-offset-4 hover:text-primary",children:"Resend a new code."}),"."]})]})]})})})}export{de as default};
