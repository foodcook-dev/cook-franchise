import{r as o,j as t,c as K,B as T,L as M}from"./index-DDD4eibi.js";import{C as G}from"./card-8g9uUcw2.js";import{u as H,t as U,F as X,a as z,b as O,d as W,e as Z}from"./form-BN-6wWAv.js";import{z as L}from"./index-DXqQCM1T.js";import{I as q}from"./input-BzTJxgO6.js";import{S as J}from"./separator-Bd9KV3-6.js";const _=o.createContext(!1),A=o.forwardRef(({className:u,children:i,...N},x)=>{const{defaultValue:c,value:f,onChange:l,onComplete:m,onIncomplete:d,placeholder:v="â—‹",type:p="alphanumeric",name:C,form:R,otp:y=!1,mask:V=!1,disabled:D=!1,readOnly:w=!1,autoFocus:F=!1,ariaLabel:I="",...S}=N,k=ee(i),g=te(i),{pins:n,pinValue:e,refMap:r,...s}=Y({value:f,defaultValue:c,placeholder:v,type:p,length:g,readOnly:w});o.useEffect(()=>{l&&l(e)},[l,e]);const a=o.useRef(e.length===g);o.useEffect(()=>{e.length===g&&a.current===!1&&(a.current=!0,m&&m(e)),e.length!==g&&a.current===!0&&(a.current=!1,d&&d(e))},[g,m,d,e,n,f]),o.useEffect(()=>{if(!F)return;const E=r==null?void 0:r.get(0);E&&E.focus()},[F,r]);const b=o.useRef(0);let P=0;const $=k.map(E=>{if(E.type===B){const j=P;return P=P+1,o.cloneElement(E,{name:C,inputKey:`input-${j}`,value:g>j?n[j]:"",onChange:h=>s.handleChange(h,j),onFocus:h=>s.handleFocus(h,j),onBlur:()=>s.handleBlur(j),onKeyDown:h=>s.handleKeyDown(h,j),onPaste:h=>s.handlePaste(h),placeholder:v,type:p,mask:V,autoComplete:y?"one-time-code":"off",disabled:D,readOnly:w,"aria-label":I||`Pin input ${P} of ${g}`,ref:h=>{h?r==null||r.set(j,h):r==null||r.delete(j)}})}return b.current=b.current+1,E});return t.jsx(_.Provider,{value:!0,children:t.jsxs("div",{ref:x,"aria-label":"Pin Input",className:u,...S,children:[$,t.jsx("input",{type:"hidden",name:C,form:R,value:e})]})})});A.displayName="PinInput";const Q=({className:u,component:i,...N},x)=>{const{mask:c,type:f,inputKey:l,...m}=N;if(!o.useContext(_))throw new Error(`PinInputField must be used within ${A.displayName}.`);const v=i||"input";return t.jsx(v,{ref:x,type:c?"password":f==="numeric"?"tel":"text",inputMode:f==="numeric"?"numeric":"text",className:K("size-10 text-center",u),...m},l)},B=o.forwardRef(Q),Y=({value:u,defaultValue:i,placeholder:N,type:x,length:c,readOnly:f})=>{const l=o.useMemo(()=>Array.from({length:c},(n,e)=>i?i.charAt(e):u?u.charAt(e):""),[i,c,u]),[m,d]=o.useState(l),v=m.join("").trim();o.useEffect(()=>{d(l)},[l]);const p=o.useRef(null);function C(){return p.current||(p.current=new Map),p.current}function R(n){const e=C();return e==null?void 0:e.get(n)}function y(n){const e=R(n);e&&(e.focus(),e.placeholder="")}function V(n,e){n.target.select(),y(e)}function D(n){const e=R(n);e&&(e.placeholder=N)}function w(n,e){const r=R(e);r&&(r.value=n),d(s=>s.map((a,b)=>b===e?n:a))}function F(n){return(x==="alphanumeric"?/^[a-zA-Z0-9]+$/i:/^[0-9]+$/).test(n)}const I=o.useRef(null);function S(n,e){const r=n.target.value,s=I.current,a=s&&s.length===c?s.charAt(c-1):r.slice(-1);F(a)&&(w(a,e),I.current=null,r.length>0&&y(e+1))}function k(n){n.preventDefault();const e=n.clipboardData.getData("text/plain").replace(/[\n\r\s]+/g,""),r=e.split("").slice(0,c);if(r.every(a=>F(a))){for(let a=0;a<c;a++)a<r.length&&w(r[a],a);I.current=e,y(r.length<c?r.length:c-1)}}function g(n,e){const{ctrlKey:r,key:s,shiftKey:a,metaKey:b}=n;x==="numeric"&&(!(s==="Backspace"||s==="Tab"||s==="Control"||s==="Delete"||r&&s==="v"||b&&s==="v"||!Number.isNaN(Number(s)))||f)&&n.preventDefault(),s==="ArrowLeft"||a&&s==="Tab"?(n.preventDefault(),y(e-1)):s==="ArrowRight"||s==="Tab"||s===" "?(n.preventDefault(),y(e+1)):s==="Delete"?n.preventDefault():s==="Backspace"&&(n.preventDefault(),w("",e),n.target.value===""&&y(e-1))}return{pins:m,pinValue:v,refMap:C(),handleFocus:V,handleBlur:D,handleChange:S,handlePaste:k,handleKeyDown:g}},ee=u=>o.Children.toArray(u).filter(i=>{if(o.isValidElement(i))return o.isValidElement(i);throw new Error(`${A.displayName} contains invalid children.`)}),te=u=>o.Children.toArray(u).filter(i=>{if(o.isValidElement(i)&&i.type===B)return o.isValidElement(i)}).length,ne=L.object({otp:L.string().min(1,{message:"Please enter your otp code."})});function se({className:u,...i}){const[N,x]=o.useState(!1),[c,f]=o.useState(!0),l=H({resolver:U(ne),defaultValues:{otp:""}});function m(d){x(!0),console.log({data:d}),setTimeout(()=>{l.reset(),x(!1)},2e3)}return t.jsx("div",{className:K("grid gap-6",u),...i,children:t.jsx(X,{...l,children:t.jsx("form",{onSubmit:l.handleSubmit(m),children:t.jsxs("div",{className:"grid gap-2",children:[t.jsx(z,{control:l.control,name:"otp",render:({field:d})=>t.jsxs(O,{className:"space-y-1",children:[t.jsx(W,{children:t.jsx(A,{...d,className:"flex h-10 justify-between",onComplete:()=>f(!1),onIncomplete:()=>f(!0),children:Array.from({length:7},(v,p)=>p===3?t.jsx(J,{orientation:"vertical"},p):t.jsx(B,{component:q,className:`${l.getFieldState("otp").invalid?"border-red-500":""}`},p))})}),t.jsx(Z,{})]})}),t.jsx(T,{className:"mt-2",disabled:c,loading:N,children:"Verify"})]})})})})}function ue(){return t.jsx(t.Fragment,{children:t.jsx("div",{className:"container grid h-svh flex-col items-center justify-center bg-primary-foreground lg:max-w-none lg:px-0",children:t.jsxs("div",{className:"mx-auto flex w-full flex-col justify-center space-y-2 sm:w-[480px] lg:p-8",children:[t.jsxs("div",{className:"mb-4 flex items-center justify-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2 h-6 w-6",children:t.jsx("path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3"})}),t.jsx("h1",{className:"text-xl font-medium",children:"Shadcn Admin"})]}),t.jsxs(G,{className:"p-6",children:[t.jsxs("div",{className:"mb-2 flex flex-col space-y-2 text-left",children:[t.jsx("h1",{className:"text-md font-semibold tracking-tight",children:"Two-factor Authentication"}),t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Please enter the authentication code. ",t.jsx("br",{})," We have sent the authentication code to your email."]})]}),t.jsx(se,{}),t.jsxs("p",{className:"mt-4 px-8 text-center text-sm text-muted-foreground",children:["Haven't received it?"," ",t.jsx(M,{to:"/resent-new-code",className:"underline underline-offset-4 hover:text-primary",children:"Resend a new code."}),"."]})]})]})})})}export{ue as default};
